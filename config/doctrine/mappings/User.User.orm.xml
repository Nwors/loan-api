<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping"
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                  xsi:schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping
                        https://www.doctrine-project.org/schemas/orm/doctrine-mapping.xsd">

    <entity name="App\Core\Domain\User\User" table="app_user">
        <id name="id" type="uuid">
            <generator strategy="NONE"/>
        </id>

        <embedded name="firstName" class="App\Core\Domain\User\ValueObject\FirstName" use-column-prefix="false"/>
        <embedded name="lastName" class="App\Core\Domain\User\ValueObject\LastName" use-column-prefix="false"/>
        <embedded name="age" class="App\Core\Domain\User\ValueObject\Age" use-column-prefix="false"/>
        <embedded name="city" class="App\Core\Domain\User\ValueObject\City" use-column-prefix="false"/>
        <embedded name="USState" class="App\Core\Domain\User\ValueObject\USState" use-column-prefix="false"/>
        <embedded name="ssn" class="App\Core\Domain\User\ValueObject\SSN" use-column-prefix="false"/>
        <embedded name="fico" class="App\Core\Domain\User\ValueObject\Fico" use-column-prefix="false"/>
        <embedded name="email" class="App\Core\Domain\Common\Email" use-column-prefix="false"/>
        <embedded name="phone" class="App\Core\Domain\Common\Phone" use-column-prefix="false"/>

        <field name="createdAt" column="created_at" type="datetimetz_immutable"/>
        <field name="updatedAt" column="updated_at" type="datetimetz_immutable"/>

        <one-to-many field="products" target-entity="App\Core\Domain\User\UserProduct" mapped-by="user">
            <order-by>
                <order-by-field name="createdAt"/>
            </order-by>
            <cascade>
                <cascade-all/>
            </cascade>
        </one-to-many>
    </entity>
</doctrine-mapping>
